// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// cliente
model ClientModel {
  id                   String             @id @default(uuid())
  name                 String             @db.VarChar(150)
  document             String             @db.VarChar(14)
  email                String             @db.VarChar(50)
  contact              String             @db.VarChar(25)
  dob                  DateTime
  address_cep          String             @db.VarChar(9)
  address_number       Int
  address_complement   String?            @db.VarChar(20)
}

// prestador de servicos
model ProviderModel {
  id                   String             @id @default(uuid())
  name                 String             @db.VarChar(150)
  document             String             @db.VarChar(14)
  email                String             @db.VarChar(50)
  contact              String             @db.VarChar(25)
  dob                  DateTime
  works                ProviderWorkModel[]
}

// trabalhos disponiveis na plataforma
model WorkModel {
  id                   String             @id @default(uuid())
  name                 String             @db.VarChar(150)
  jobs                 WorkJobModel[]
  provider_works       ProviderWorkModel[]
}

// servicos de um trabalho
model WorkJobModel {
  id                   String             @id @default(uuid())
  name                 String             @db.VarChar(150)
  work_id              String
  work                 WorkModel          @relation(fields: [work_id], references: [id])
  provider_work_jobs   ProviderWorkJobModel[]
}

// trabalhos que o prestador de servicos executa
model ProviderWorkModel {
  id                   String             @id @default(uuid())
  work_id              String
  provider_id          String
  work                 WorkModel          @relation(fields: [work_id], references: [id])
  provider             ProviderModel      @relation(fields: [provider_id], references: [id])
  jobs                 ProviderWorkJobModel[]
  min_cost             Float
}

// servicos que o prestador de servicos executa em um trabalho
model ProviderWorkJobModel {
  id                   String             @id @default(uuid())
  provider_work_id     String
  job_id               String
  provider_work        ProviderWorkModel  @relation(fields: [provider_work_id], references: [id])
  job                  WorkJobModel       @relation(fields: [job_id], references:[id])
  cost                 Float
  estimated_duration   Int
}
